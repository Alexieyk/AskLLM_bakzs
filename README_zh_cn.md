[![English](https://img.shields.io/badge/-English-blue?style=flat-square)](README.md)

## 开始使用

要启动 AskLLM 项目，请确保您的环境配置了所有必要的依赖项，包括 Python 环境和所需的库（例如 `torch`、`gradio`、`pandas` 等）。

### 安装 测试

1. 克隆仓库到您的本地环境：
    ```bash
    git clone <仓库-URL>
    ```

2. 导航到项目目录：
    ```bash
    cd AskLLM
    ```

3. 安装所需的依赖项（如果有 `requirements.txt` 文件）：
    ```bash
    pip install -r requirements.txt
    ```

4. 执行 `main.py` 启动项目：
    ```bash
    python main.py
    ```

## 项目架构

AskLLM 项目由几个模块组成，每个模块负责系统功能的一个特定方面：

- `main.py`：项目的入口点，负责初始化系统和处理用户输入。

- UTILS
    - `agent.py`：定义与用户交互和处理请求的逻辑。
    - `chatbot.py`：与外部 API 通信以获取模型生成的响应。(大模型接口)
    - `log_wrapper.py`：处理日志，帮助开发者跟踪和调试。
    - `phone_utils.py`：提供与电话号码相关的实用功能，如账单和状态检查。（对接CJ接口函数

- BOTS
    - `bill_check.py` 和 `status_check.py`：专门负责特定功能的模块，处理账单和状态检查的逻辑。(智能体)
    - `chat.py`：管理与用户的聊天逻辑。
    - `common.py`：定义整个项目中使用的通用工具和功能。

## 话术跳转

`data.csv`文件是设计用来驱动一个交互式的对话系统，如一个客户服务聊天机器人。
文件中的每一行代表一个可能的对话状态或者用户查询的一种类型，并定义了对话流程中的转换和响应。以下是对各列的说明：

- `q_id`（请求ID）: 每个对话节点的唯一标识符，用于追踪对话的当前位置。
- `prefix_first`（第一次抵达时前缀）: 当用户第一次到达该节点时，系统显示的前缀文本。这可以用于设置对话的上下文或引入问题。
- `text`（机器人回答文本）: 机器人针对当前节点提供的标准回复或询问。
- `type`（类型）: 可能用于区分不同类型的对话节点，如询问、信息提供、操作指示等。
- `a`（机器人判断文本）: 机器人期待的用户回应类型或关键词，用于判断如何继续对话流程。
- `a_id`（机器人判断结果ID）: 与`a`字段相关联的唯一标识符，用于定义用户回应后的下一步操作。
- `next_q_id`（下一个请求ID）: 用户回应后，对话将跳转到的下一个节点的`q_id`。
- `prefix`（非第一次抵达时前缀）: 如果用户在对话中循环回到该节点，显示的前缀文本。这可以用于改变重复访问同一节点时的语气或信息。
- `after_loop_id`（循环次数）: 对话在一定次数的循环后应该跳转的节点ID，用于防止对话陷入死循环。
- `agent`（对应智能体）: 指示处理当前对话节点的系统组件或模块，如账单查询模块、状态检查模块等。
- `if_error`（报错类型）: 当用户的回应不能被正确理解或处理时显示的错误信息或提示。
- `label`（请求标签）: 用于标识或分类对话节点的标签，可能用于分析或优化对话流程。
- `database`（知识库）: 指示处理当前节点所需信息的数据源或知识库，可能是全局的或特定于某个功能。

根据这些列的内容，`data.csv`文件用于定义一个基于规则的对话流程，其中包括了用户的各种服务请求（如状态查询、账单查询等），以及如何根据用户的回答或系统的需求引导对话。每个条目都是对话流程中的一个节点，包含了该节点的输出文本（机器人的话语）、期待的用户回应类型、以及基于用户回应决定的下一步操作。

例如，当用户表达了对手机卡状态、余额、资费查询的兴趣时（`q_id`为0-0的行），系统可能会提示用户提供手机号码以进行查询（由`prefix_first`和`text`列组合而成的提示）。如果用户提供了手机号码（`a`列表示的动作），系统将根据`next_q_id`列指定的标识符跳转到下一步操作。如果用户未能清楚提供信息，`if_error`列提供的文本将被用作错误处理或重新提示的消息。

## 编写您自己的代理

要使用您自己的智能代理扩展 AskLLM 项目，请按照以下步骤操作：

1. 在 `agents` 目录中创建一个新的 Python 文件。
2. 定义您的代理类，继承基类（如果提供）或创建一个新的类并实现必要的方法。
3. 在您的代理类中实现处理用户输入和生成响应的逻辑。
4. 通过在 `main.py` 或适当的模块中导入和使用您的代理，将您的代理整合到主系统中。
5. 在data.csv话术跳转表格中明确何时调用该代理。

确保您的代理遵守系统的交互和响应协议，以实现无缝集成。

## 配置

要根据您的需求配置 AskLLM 项目，请考虑以下事项：

- 更新 `config.py`（如果存在）与 API 密钥、模型设置和其他可配置选项相关的参数。
- 根据项目特定需求调整环境设置，如 Python 版本和依赖项。
- 修改 `main.py` 或其他相关文件以将新的代理、功能或功能集成到系统中。
